# 第七章 数据库及分布式事务

### 7.1.1 存储引擎

1. MyISAM

   * 缺点：更新数据慢且不支持事务处理
   * 优点：查询速度快

2. InnoDB

   InnoDB适用于以下需求的场景：

   * 经常有数据更新的表，适合处理多重并发更新请求。
   * 支持事务
   * 支持灾难恢复（通过bin-log日志恢复）
   * 支持外键约束，只有InnoDB支持外键
   * 支持自动增加列属性auto_increment

3. TokuDB

4. Memory

5. TiKV

### 7.1.2 创建索引的原则

### 7.1.3 数据库三范式

1. **第一范式**
2. **第二范式**
3. **第三范式**

### 7.1.4 数据库事务

ACID性

### 7.1.5 存储过程

### 7.1.6 触发器

## 7.2 数据库的并发操作和锁

### 7.2.1 数据库的并发策略

数据库的并发控制一般采用三种方法实现：乐观锁、悲观锁、时间戳。

1. 乐观锁
2. 悲观锁
3. 时间戳

### 7.2.2 数据库锁

1. 行级锁
2. 表级锁
3. 页级锁
4. 基于Redis的分布式锁

### 7.2.3 数据库分表

## 7.3 数据库分布式事务

### 7.3.1 CAP

### 7.3.2 两阶段提交协议

### 7.3.3 三阶段提交协议

### 7.3.4 分布式事务